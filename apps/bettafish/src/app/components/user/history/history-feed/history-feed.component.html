<div class="relative">
    <div class="controls flex flex-row items-center justify-center sticky">
        <ng-container *ngIf="historyQuery.current$ | async as selected">
            <ng-container *ngIf="selected.length === 0; else canDelete">
                <button class="disabled">
                    <i-feather name="trash-2"></i-feather>
                    delete
                </button>
            </ng-container>
            <ng-template #canDelete>
                <button (click)="askDelete()">
                    <i-feather name="trash-2"></i-feather>
                    delete <span class="text-xs relative top-1 ml-0.5">({{ selected.length }})</span>
                </button>
            </ng-template>
        </ng-container>
    </div>
</div>
<ng-container *ngIf="historyQuery.loading$ | async; else notLoading">
    <div class="flex flex-col items-center justify-center h-full">
        <mat-spinner></mat-spinner>
    </div>
</ng-container>
<ng-template #notLoading>
    <ng-container *ngIf="historyQuery.all$ | async as historyDocs">
        <ng-container *ngIf="historyDocs.length === 0">
            <div style="margin-top: 1.25rem; text-align: center;">
                <h4 class="text-2xl">You haven't read anything yet!</h4>
                <p class="text-sm mt-2">
                    Well, what are you waiting for?
                </p>
            </div>
        </ng-container>
        <div>
            <ng-container *ngFor="let history of historyDocs">
                <dragonfish-history-item
                    [document]="history"
                    (onSelect)="historyService.select($event)"
                    (onDeselect)="historyService.deselect($event)"
                ></dragonfish-history-item>
            </ng-container>
        </div>
    </ng-container>
</ng-template>
