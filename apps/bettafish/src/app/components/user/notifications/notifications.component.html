<ng-container *ngIf="loading; else notLoading">
    <div class="flex flex-row items-center justify-center h-72">
        <mat-spinner></mat-spinner>
    </div>
</ng-container>

<ng-template #notLoading>
    <ng-container *ngIf="unread && read; else noNotifications">
        <div class="notifications-header">
            <ng-container *ngIf="viewRead; else viewUnread">
                <div class="view-toggle">
                    <button matRipple class="control left" (click)="switchView()">Unread</button>
                    <button matRipple class="control right active">Read</button>
                </div>
                <button matRipple class="control disabled">Mark As Read</button>
            </ng-container>
            <ng-template #viewUnread>
                <div class="view-toggle">
                    <button matRipple class="control left active">Unread</button>
                    <button matRipple class="control right" (click)="switchView()">Read</button>
                </div>
                <ng-container *ngIf="selectedNotifications.length === 0; else someNotifs">
                    <button matRipple class="control disabled">Mark As Read</button>
                </ng-container>
                <ng-template #someNotifs>
                    <button matRipple class="control" (click)="markAsRead()">Mark As Read</button>
                </ng-template>
            </ng-template>
        </div>
        <div class="notifications-container">
            <ng-container *ngIf="viewRead; else listUnread">
                <ul class="notif-list">
                    <ng-container *ngFor="let notif of read">
                        <li>
                            <dragonfish-notification-item [notif]="notif"></dragonfish-notification-item>
                        </li>
                    </ng-container>
                </ul>
            </ng-container>
            <ng-template #listUnread>
                <ul class="notif-list">
                    <ng-container *ngFor="let notif of unread">
                        <li>
                            <dragonfish-notification-item
                                [notif]="notif"
                                (onSelected)="selectNotification($event)"
                                (onDeselected)="deselectNotification($event)"
                            ></dragonfish-notification-item>
                        </li>
                    </ng-container>
                </ul>
            </ng-template>
        </div>
    </ng-container>

    <ng-template #noNotifications>
        <div style="margin-top: 1.25rem; text-align: center;">
            <h4 class="text-2xl">Nothing's happened yet</h4>
            <p class="text-sm mt-2">
                Check back when something happens!
            </p>
        </div>
    </ng-template>
</ng-template>
