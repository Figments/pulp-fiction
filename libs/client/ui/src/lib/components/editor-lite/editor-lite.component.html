<ng-container *ngIf="expandable; else showEditor">
    <div class="expandable-bar" (click)="toggleExpandable()">
        <div class="avatar-block" *ngIf="currUser">
            <img [src]="currUser.profile.avatar" [alt]="'avatar'">
        </div>
        <div class="title">
            <h3>{{ expandableTitle }}</h3>
        </div>
    </div>
</ng-container>

<ng-template #showEditor>
    <form [formGroup]="form" [@inOutAnimation]>
        <div class="w-3/4 mx-auto">
            <div class="flex items-center p-1 border border-b-0 rounded-t-md" style="border-color: var(--borders);">
                <button class="shadow-none border-none px-2.5 py-1.5" (click)="addSimpleTag('**')">
                    <i-feather name="bold" class="mr-0"></i-feather>
                </button>
                <button class="shadow-none border-none px-2.5 py-1.5" (click)="addSimpleTag('*')">
                    <i-feather name="italic" class="mr-0"></i-feather>
                </button>
                <button class="shadow-none border-none px-2.5 py-1.5" (click)="addSimpleTag('__')">
                    <i-feather name="underline" class="mr-0"></i-feather>
                </button>
                <div class="mx-0.5">|</div>
                <button class="shadow-none border-none px-2.5 py-1.5">
                    <i-feather name="link" class="mr-0"></i-feather>
                </button>
                <button class="shadow-none border-none px-2.5 py-1.5">
                    <i-feather name="image" class="mr-0"></i-feather>
                </button>
                <button class="shadow-none border-none px-2.5 py-1.5">
                    <i-feather name="film" class="mr-0"></i-feather>
                </button>
                <div class="mx-0.5">|</div>
                <button class="shadow-none border-none px-2.5 py-1.5">
                    <i-feather name="smile" class="mr-0"></i-feather>
                </button>
                <div class="flex-1"><!--spacer--></div>
                <button class="shadow-none border-none px-2.5 py-1.5">
                    <i-feather name="edit-3"></i-feather>
                    Edit
                </button>
                <button class="shadow-none border-none px-2.5 py-1.5">
                    <i-feather name="eye"></i-feather>
                    Preview
                </button>
            </div>
            <textarea
                [formControlName]="controlName"
                [placeholder]="placeholder"
                #editor
            ></textarea>
            <div class="flex items-center justify-center p-1">
                <button type="button" class="shadow-none border-none px-2.5 py-1.5" (click)="toggleExpandable()">
                    <i-feather name="x"></i-feather>
                    Cancel
                </button>
                <div class="mx-0.5"><!--spacer--></div>
                <button type="button" class="primary shadow-none border-none px-2.5 py-1.5">
                    <i-feather name="check"></i-feather>
                    Submit
                </button>
            </div>
        </div>
    </form>
</ng-template>
