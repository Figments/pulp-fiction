<div class="topbar z-50 sticky top-0">
    <div class="flex items-center w-full h-full">
        <ng-content></ng-content>
        <div class="flex-1"><!--spacer--></div>
        <ng-container *ngIf="sessionQuery.currentUser$ | async as currentUser; else login">
            <div class="flex items-center h-full border-l pr-2.5 pl-1.5" style="border-color: var(--accent-light);">
                <a
                    class="link-with-avatar"
                    [matMenuTriggerFor]="accountMenu"
                >
                    <img class="avatar" [src]="currentUser.profile.avatar" [alt]="'Avatar'" />
                    <div class="info ml-1 text-white text-xs">
                        <div class="font-bold truncate">{{ currentUser.username }}</div>
                        <div class="truncate">{{ currentUser.profile.tagline }}</div>
                    </div>
                </a>
                <a
                    class="link"
                    [matTooltip]="'Inbox'"
                    [matTooltipClass]="'offprint-tooltip'"
                >
                    <span class="link-icon"><rmx-icon name="inbox-line"></rmx-icon></span>
                </a>
                <a
                    class="link"
                    [matTooltip]="'Settings'"
                    [matTooltipClass]="'offprint-tooltip'"
                >
                    <span class="link-icon"><rmx-icon name="settings-5-line"></rmx-icon></span>
                </a>
            </div>
        </ng-container>
        <ng-template #login>
            <div class="flex items-center h-full border-l pr-2.5 pl-1.5" style="border-color: var(--accent-light);">
                <a class="link flex items-center text-sm" (click)="openAuthModal()">
                    <span class="link-icon mr-1"><rmx-icon name="login-circle-line"></rmx-icon></span>
                    <span>Log In</span>
                </a>
                <a
                    class="link"
                    [matTooltip]="'Settings'"
                    [matTooltipClass]="'offprint-tooltip'"
                >
                    <span class="link-icon"><rmx-icon name="settings-5-line"></rmx-icon></span>
                </a>
            </div>
        </ng-template>
    </div>
</div>

<mat-menu #accountMenu="matMenu">
    <button mat-menu-item><rmx-icon name="user-line"></rmx-icon>Profile</button>
    <div class="border-b w-full border-gray-500 my-2"><!--spacer--></div>
    <button mat-menu-item (click)="logout()"><rmx-icon name="logout-circle-line"></rmx-icon>Logout</button>
</mat-menu>
