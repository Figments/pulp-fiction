<ng-container *ngIf="route.children.length === 0">
    <ng-container *ngIf="sessionQuery.currentUser$ | async as currentUser">
        <div class="my-stuff-nav shadow-lg relative sticky top-0 z-40">
            <div class="mx-8 py-4">
                <div class="flex flex-row items-center">
                    <i-feather name="hard-drive" class="text-white relative mr-2"></i-feather>
                    <h3 class="text-3xl text-white relative font-medium top-1">
                        My Stuff
                    </h3>
                    <div class="flex-1"><!--spacer--></div>
                    <button
                        class="border-none shadow-none rounded-full px-2 py-1.5"
                        [ngClass]="createMenuOpened ? 'active': ''"
                        [matMenuTriggerFor]="createMenu"
                        (menuOpened)="toggleCreateMenu()"
                        (menuClosed)="toggleCreateMenu()"
                    >
                        <i-feather name="loader" class="text-white relative top-0.5"></i-feather>
                        <span class="text-white ml-1">Create</span>
                    </button>
                    <div class="text-white mx-1.5 select-none cursor-default">|</div>
                    <button
                        class="border-none shadow-none rounded-full px-2 py-1.5"
                        [ngClass]="isIconView ? '' : 'active'"
                    >
                        <i-feather name="list" class="text-white relative top-0.5"></i-feather>
                    </button>
                    <button
                        class="border-none shadow-none rounded-full px-2 py-1.5"
                        [ngClass]="isIconView ? 'active' : ''"
                    >
                        <i-feather name="grid" class="text-white relative top-0.5"></i-feather>
                    </button>
                    <div class="text-white mx-1.5 select-none cursor-default">|</div>
                    <button
                        class="border-none shadow-none rounded-full px-2 py-1.5"
                        [ngClass]="filterMenuOpened ? 'active': ''"
                        [matMenuTriggerFor]="filterMenu"
                        (menuOpened)="toggleFilterMenu()"
                        (menuClosed)="toggleFilterMenu()"
                    >
                        <i-feather name="filter" class="text-white relative top-0.5"></i-feather>
                    </button>
                    <div class="mx-1.5"><!--spacer--></div>
                    <form [formGroup]="searchForm" (ngSubmit)="submitSearch()">
                        <dragonfish-text-field
                            [formControlName]="'query'"
                            [name]="'query'"
                            [type]="'text'"
                            [placeholder]="'Search...'"
                            [searchBox]="true"
                        ></dragonfish-text-field>
                    </form>
                </div>
            </div>
        </div>

        <mat-menu #createMenu="matMenu">
            <button mat-menu-item (click)="createContent(contentKind.ProseContent)">
                <i-feather name="book-open"></i-feather>Add Prose
            </button>
            <button mat-menu-item (click)="createContent(contentKind.PoetryContent)">
                <i-feather name="feather"></i-feather>Add Poetry
            </button>
            <!--<button mat-menu-item><i-feather name="globe"></i-feather>Add Nonfiction</button>-->
            <!--<button mat-menu-item><i-feather name="globe"></i-feather>Add Script</button>-->
            <button mat-menu-item (click)="createContent(contentKind.BlogContent)">
                <i-feather name="coffee"></i-feather>Add Blog
            </button>
            <button mat-menu-item (click)="createContent(contentKind.NewsContent)" *ngIf="checkIsAllowed(currentUser)">
                <i-feather name="globe"></i-feather>Add Newspost
            </button>
        </mat-menu>

        <mat-menu #filterMenu="matMenu">
            <button mat-menu-item>All</button>
            <button mat-menu-item>Published</button>
            <button mat-menu-item>Unpublished</button>
            <button mat-menu-item>Newest</button>
            <button mat-menu-item>Oldest</button>
        </mat-menu>
    </ng-container>
</ng-container>

<ng-container *ngIf="route.children.length === 0; else openedView">
    <dragonfish-content-page></dragonfish-content-page>
</ng-container>

<ng-template #openedView>
    <div class="mb-8">
        <router-outlet></router-outlet>
    </div>
</ng-template>
