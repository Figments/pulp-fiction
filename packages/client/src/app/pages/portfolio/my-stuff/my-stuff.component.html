<div class="tools">
    <div class="tool-buttons">
        <ng-container *ngIf="route.children.length === 0; else goBack">
            <button matRipple class="tool left" [matMenuTriggerFor]="createMenu"><i-feather name="loader"></i-feather>Create</button>
        </ng-container>
        <ng-template #goBack>
            <button matRipple class="tool left" [routerLink]="['/portfolio', currentUser._id, currentUser.username | slugify, 'my-stuff']"><i-feather name="chevron-left"></i-feather>Back</button>
        </ng-template>
        <button matRipple class="tool end" [ngClass]="{'disabled': route.children.length !== 0}" matTooltip="Create Folder" matTooltipClass="offprint-tooltip"><i-feather class="no-text" name="folder-plus"></i-feather></button>

        <button matRipple class="tool left" [ngClass]="{'disabled': route.children.length !== 0}" style="margin: 0 0 0 1rem;" matTooltip="List View" matTooltipClass="offprint-tooltip"><i-feather class="no-text" name="list"></i-feather></button>
        <button matRipple class="tool mid" [ngClass]="{'disabled': route.children.length !== 0}" matTooltip="Icon View" matTooltipClass="offprint-tooltip"><i-feather class="no-text" name="grid"></i-feather></button>
        <button matRipple class="tool end" [ngClass]="{'disabled': route.children.length !== 0}" matTooltip="Filter" matTooltipClass="offprint-tooltip" [matMenuTriggerFor]="filterMenu"><i-feather class="no-text" name="filter"></i-feather></button>
    </div>
    <form [formGroup]="searchStuff" class="tool-search">
        <div class="search-bar">
            <input type="text" formControlName="query" class="search-input" [ngClass]="{'disabled': route.children.length !== 0}" placeholder="Search your stuff...">
            <button matRipple class="search-submit" [ngClass]="{'disabled': route.children.length !== 0}" type="submit"><i-feather name="search"></i-feather></button>
        </div>
    </form>
</div>

<mat-menu #createMenu="matMenu">
    <button mat-menu-item [routerLink]="['new-work']"><i-feather name="book"></i-feather>Add Work</button>
    <button mat-menu-item [routerLink]="['new-blog']"><i-feather name="coffee"></i-feather>Add Blog</button>
</mat-menu>

<mat-menu #filterMenu="matMenu">
    <button mat-menu-item>By Name</button>
    <button mat-menu-item>By Kind</button>
    <button mat-menu-item>By Date Added</button>
</mat-menu>

<ng-container *ngIf="route.children.length === 0; else openedForms">
    <ng-container *ngIf="myContent.length === 0; else hasContent">
        <div class="empty">
            <h3>It's pretty lonely here...</h3>
            <p>Why not add some content by hitting the create button?</p>
        </div>
    </ng-container>
    
    <ng-template #hasContent>
        <div class="content-grid">
            <ng-container *ngFor="let content of myContent">
                <!--For blogs-->
                <ng-container *ngIf="content.kind === 'BlogContent'">
                    <div class="content-box" [matTooltip]="'Blog â€” ' + content.title" [matTooltipClass]="'offprint-tooltip'">
                        <div class="content-description">
                            <i-feather name="coffee"></i-feather>
                            <h5>{{ content.title }}</h5>
                        </div>
                        <div class="content-preview">
                            <div class="html-description" [innerHtml]="content.body | safeHtml"></div>
                        </div>
                    </div>
                </ng-container>

                <!--For works-->
                <ng-container *ngIf="content.kind === 'WorkContent'">
                    <div class="content-box">
                        this is a work!
                    </div>
                </ng-container>
            </ng-container>
        </div>
    </ng-template>
</ng-container>

<ng-template #openedForms>
    <router-outlet></router-outlet>
</ng-template>