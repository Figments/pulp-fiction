<div class="new-blog-modal">
    <h1>Create a new blog</h1>
    <hr>
    <form [formGroup]="newBlogForm" (ngSubmit)="submitForm()">
        <label for="title">Title:</label>
        <div class="warning-message" *ngIf="fields.title.invalid && (fields.title.dirty || fields.title.touched)">Titles must be between 3 and 100 characters.</div>
        <input name="title" type="text" class="u-full-width" formControlName="title">
        
        <label for="body">Body:</label>
        <div class="warning-message" *ngIf="fields.body.invalid && (fields.body.dirty || fields.body.touched)">Body text must be more than 3 characters.</div>
        <quill-editor minLength="3" formControlName="body" (onEditorChanged)="triggerChangeDetection()" (onEditorCreated)="onEditorCreated($event)" [formats]="editorFormats">
            <div quill-editor-toolbar>
                <span class="ql-formats">
                    <button class="ql-bold" [title]="'Bold'"></button>
                    <button class="ql-italic" [title]="'Italic'"></button>
                    <button class="ql-underline" [title]="'Underline'"></button>
                    <button class="ql-strike" [title]="'Strikethrough'"></button>
                </span>
                <span class="ql-formats">
                    <button class="ql-align ql-center" value="center"></button>
                    <button class="ql-align ql-right" value="right"></button>
                    <button class="ql-align ql-justify" value="justify"></button>
                </span>
                <span class="ql-formats">
                    <button class="ql-list ql-bullet" value="bullet"></button>
                    <button class="ql-list ql-ordered" value="ordered"></button>
                </span>
                <span class="ql-formats">
                    <button class="ql-divider" [title]="'Divider'"></button>
                    <button class="ql-link" [title]="'Link'"></button>
                    <button class="ql-image" [title]="'Image link'"></button>
                    <button class="ql-blockquote" [title]="'Blockquote'"></button>
                    <button class="ql-code" [title]="'Code'"></button>
                    <button class="ql-clean" [title]="'Remove formatting'"></button>
                </span>
                <select class="ql-header"></select>
            </div>
        </quill-editor>

        <label>
            <input type="checkbox" formControlName="published">
            <span class="label-body">Publish Now</span>
        </label>

        <p>
            NOTE: All unpublished work is submitted as a draft. You can publish a blog&mdash;or revoke it&mdash;at any time.
        </p>

        <div class="loader" *ngIf="loading">
            <div class="lds-dual-ring"></div>
        </div>
        <button type="submit" class="blog-modal-button" *ngIf="!loading">Create Blog</button>
        <button type="button" class="blog-modal-button" (click)="askCancel()">Cancel</button>
    </form>
</div>