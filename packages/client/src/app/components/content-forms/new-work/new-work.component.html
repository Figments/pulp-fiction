<form [formGroup]="newWorkForm">
    <div class="work-box">
        <div class="work-info">
            <div class="work-details">
                <div class="work-header">
                    <h1>
                        <input class="work-title" type="text" formControlName="title" placeholder="Title">
                    </h1>
                    <h2>by {{ username }}</h2>
                </div>

                <div class="category-genre">
                    <div>
                        <!--Content Rating-->
                        <mat-form-field class="work-form">
                            <mat-label>Select a rating</mat-label>
                            <mat-select formControlName="rating">
                                <mat-option *ngFor="let rate of rating | keyvalue" [value]="rate.key">
                                    {{ rate.value }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <span>//</span>
                    <div>
                        <mat-form-field class="work-form">
                            <mat-label>Select a category</mat-label>
                            <mat-select formControlName="thisCategory">
                                <mat-option *ngFor="let cat of categories | keyvalue" [value]="cat.key">
                                    {{ cat.value }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <span *ngIf="isFiction() || isPoetry()">//</span>
                    <div style="flex: 1;">
                        <!--Genres for Fiction-->
                        <div *ngIf="isFiction()">
                            <mat-form-field class="work-form work-chips">
                                <mat-chip-list #fictionChipList aria-label="Genres selection">
                                    <mat-chip *ngFor="let genre of genresList" [selectable]="true" [removable]="true">
                                        {{ genre }}
                                        <mat-icon matChipRemove>cancel</mat-icon>
                                    </mat-chip>
                                    <input
                                        placeholder="Choose Genres (max 2)"
                                        #genreInput
                                        [formControl]="fields.theseGenres"
                                        [matAutocomplete]="auto"
                                        [matChipInputFor]="fictionChipList"
                                        [matChipInputSeparatorKeyCodes]="separatorKeysCodes">
                                </mat-chip-list>
                                <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectedGenre($event)">
                                    <mat-option *ngFor="let genre of genresFiction | keyvalue" [value]="genre.key">
                                        {{ genre.value }}
                                    </mat-option>
                                </mat-autocomplete>
                            </mat-form-field>
                        </div>

                        <!--Genres for Poetry-->
                        <div *ngIf="isPoetry()">
                            <ng-select [items]="genresPoetry | keyvalue"
                                bindLabel="value"
                                bindValue="key"
                                placeholder="Select Genre"
                                clearAllText="Clear"
                                formControlName="theseGenres"
                                [searchable]="false"
                                class="custom"></ng-select>
                        </div>
                    </div>
                    <span *ngIf="isFanfiction()">//</span>
                    <div *ngIf="isFanfiction()">
                        <!--Fandoms-->
                        <ng-select [items]="fandoms | keyvalue"
                            bindLabel="value"
                            bindValue="key"
                            [multiple]="true"
                            maxSelectedItems="5"
                            placeholder="Select Fandoms (5 Max)"
                            clearAllText="Clear"
                            formControlName="theseFandoms"
                            class="custom"></ng-select>
                    </div>
                </div>
                
                <div class="work-description">
                    <editor [parentForm]="newWorkForm" [controlName]="'longDesc'"></editor>
                </div>
            </div>
        </div>
    </div>
</form>

{{ debug() }}
